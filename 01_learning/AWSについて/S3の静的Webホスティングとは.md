
# テーマ

S3の静的WebホスティングとSPAの関係

## 目的

S3でSPAを公開するときに、  
「なぜ静的Webホスティング設定が必要なのか」を  
仕組みとして理解するため。

## 本筋

- S3は何をしているだけのサービスなのか
    
- 静的Webホスティング設定で「何が変わるのか」
    
- SPAが壊れる／壊れない条件は何か


## 結論

S3はただのファイル置き場で、  
設定をしなくても `index.html` に直接アクセスすれば  
HTMLとしてブラウザに表示される。

ただし、SPAは  
ページ遷移をせず、  
JavaScriptのルート（/todo など）で画面を切り替えるため、  
URLを直接叩かれたときに  
**常に index.html を返す仕組み**が必要になる。

S3では、その役割を  
**静的Webホスティング設定**が担っている。

## 図解

```text
【設定なしのS3】
ブラウザ
 └ /index.html → index.html を返す（表示できる）
 └ /todo       → そんなファイルはない → エラー

【静的Webホスティング設定あり】
ブラウザ
 └ /           → index.html を返す
 └ /todo       → ルールで index.html を返す
                  └ JSが起動して /todo 画面を表示
```

## 詳細

- S3はオブジェクトストレージで、基本動作は  
    「指定されたファイルをそのまま返す」だけ
    
- 静的Webホスティング設定をしなくても  
    `index.html` に直接アクセスすれば表示できる
    
- 複数HTML（index.html → todo.html など）のサイトは  
    設定なしでも普通に動く
    
- SPAは基本的にHTMLは1枚（index.html）で、  
    ページ切り替えはブラウザ内のJavaScriptが行う
    
- SPAで問題になるのは  
    `/todo` などのURLを **直接開いたとき**
    
- 静的Webホスティング設定をすると、  
    `/` や存在しないパスでも  
    「index.htmlを返す」というWeb向けのルールが追加される

